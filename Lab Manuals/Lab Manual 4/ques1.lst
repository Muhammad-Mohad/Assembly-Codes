     1                                  [org 0x0100]
     2                                  
     3 00000000 BB89B1                  mov bx, 0xb189
     4 00000003 B8A5AB                  mov ax, 0xaba5                     
     5                                  
     6 00000006 B90000                  mov cx, 0 
     7 00000009 89DA                    mov dx, bx 
     8                                  
     9                                  count_ones:
    10 0000000B D1EA                    shr dx, 1 
    11 0000000D 7301                    jnc no_increment 
    12 0000000F 41                      inc cx 
    13                                  
    14                                  no_increment:
    15 00000010 83FA00                  cmp dx, 0
    16 00000013 75F6                    jnz count_ones 
    17                                  
    18 00000015 89CF                    mov di, cx 
    19 00000017 BE0000                  mov si, 0 
    20                                  
    21 0000001A C606[3C00]01            mov byte [mask], 1 
    22 0000001F C606[3D00]00            mov byte [shift_count], 0 
    23                                  
    24                                  complement_bits:
    25 00000024 8A0E[3D00]              mov cl, [shift_count] 
    26 00000028 8A1E[3C00]              mov bl, [mask] 
    27 0000002C D2E3                    shl bl, cl 
    28 0000002E 30D8                    xor al, bl 
    29                                  
    30                                  
    31 00000030 FE06[3D00]              inc byte [shift_count] 
    32 00000034 4F                      dec di 
    33 00000035 75ED                    jnz complement_bits 
    34                                  
    35 00000037 B8004C                  mov ax, 0x4c00
    36 0000003A CD21                    int 0x21
    37                                  
    38 0000003C 00                      mask db 0 
    39 0000003D 00                      shift_count db 0 
